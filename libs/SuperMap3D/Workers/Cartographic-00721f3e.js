define(["exports","./Cartesian4-69ef58e5","./Check-7b2a090c","./when-b60132fc","./Math-119be1a3"],(function(e,t,i,a,n){"use strict";var u=new t.Cartesian3,d=new t.Cartesian3;function r(e,i,r,s,o){var h=e.x,l=e.y,f=e.z,C=i.x,c=i.y,g=i.z,m=h*h*C*C,M=l*l*c*c,p=f*f*g*g,w=m+M+p,R=Math.sqrt(1/w),v=t.Cartesian3.multiplyByScalar(e,R,u);if(w<s)return isFinite(R)?t.Cartesian3.clone(v,o):void 0;var y=r.x,q=r.y,b=r.z,z=d;z.x=v.x*y*2,z.y=v.y*q*2,z.z=v.z*b*2;var O,S,x,E,k,V,B,I=(1-R)*t.Cartesian3.magnitude(e)/(.5*t.Cartesian3.magnitude(z)),L=0;do{L=(O=m*(k=(S=1/(1+(I-=L)*y))*S)+M*(V=(x=1/(1+I*q))*x)+p*(B=(E=1/(1+I*b))*E)-1)/(-2*(m*(k*S)*y+M*(V*x)*q+p*(B*E)*b))}while(Math.abs(O)>n.CesiumMath.EPSILON12);return a.defined(o)?(o.x=h*S,o.y=l*x,o.z=f*E,o):new t.Cartesian3(h*S,l*x,f*E)}function s(e,t,i){this.longitude=a.defaultValue(e,0),this.latitude=a.defaultValue(t,0),this.height=a.defaultValue(i,0)}s.fromRadians=function(e,t,i,n){return i=a.defaultValue(i,0),a.defined(n)?(n.longitude=e,n.latitude=t,n.height=i,n):new s(e,t,i)},s.fromDegrees=function(e,t,i,a){return e=n.CesiumMath.toRadians(e),t=n.CesiumMath.toRadians(t),s.fromRadians(e,t,i,a)};var o=new t.Cartesian3,h=new t.Cartesian3,l=new t.Cartesian3,f=new t.Cartesian3(1/6378137,1/6378137,1/6356752.314245179),C=new t.Cartesian3(1/6378137,1/6378137,1/6378137),c=new t.Cartesian3(1/40680631590769,1/40680631590769,1/40408299984661.445),g=new t.Cartesian3(1/40680631590769,1/40680631590769,1/40680631590769),m=n.CesiumMath.EPSILON1;s.fromCartesian=function(e,i,u){var d=a.defined(i)?i.oneOverRadii:C,M=a.defined(i)?i.oneOverRadiiSquared:g,p=a.defined(i)?i._centerToleranceSquared:m;n.CesiumMath.equalsEpsilon(n.CesiumMath.Radius,6356752.314245179,n.CesiumMath.EPSILON10)&&(d=a.defined(i)?i.oneOverRadii:f,M=a.defined(i)?i.oneOverRadiiSquared:c);var w=r(e,d,M,p,h);if(a.defined(w)){var R=t.Cartesian3.multiplyComponents(w,M,o);R=t.Cartesian3.normalize(R,R);var v=t.Cartesian3.subtract(e,w,l),y=Math.atan2(R.y,R.x),q=Math.asin(R.z),b=n.CesiumMath.sign(t.Cartesian3.dot(v,e))*t.Cartesian3.magnitude(v);return a.defined(u)?(u.longitude=y,u.latitude=q,u.height=b,u):new s(y,q,b)}},s.toCartesian=function(e,i,a){return t.Cartesian3.fromRadians(e.longitude,e.latitude,e.height,i,a)},s.sphericalDistance=function(e,t,a,u){if(i.Check.defined("longitudeA",e),i.Check.defined("longitudeB",a),i.Check.defined("latitudeA",t),i.Check.defined("latitudeB",u),e===a&&t===u)return 0;var d=n.CesiumMath.toRadians(t),r=n.CesiumMath.toRadians(u),s=n.CesiumMath.toRadians(e),o=n.CesiumMath.toRadians(a),h=s*s+d*d,l=o*o+r*r,f=(h+l-((s-o)*(s-o)+(d-r)*(d-r)))/(2*Math.sqrt(h)*Math.sqrt(l));return f=n.CesiumMath.clamp(f,-1,1),Math.acos(f)*n.CesiumMath.Radius},s.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new s(e.longitude,e.latitude,e.height)},s.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},s.equalsEpsilon=function(e,t,i){return e===t||a.defined(e)&&a.defined(t)&&Math.abs(e.longitude-t.longitude)<=i&&Math.abs(e.latitude-t.latitude)<=i&&Math.abs(e.height-t.height)<=i},s.ZERO=Object.freeze(new s(0,0,0)),s.prototype.clone=function(e){return s.clone(this,e)},s.prototype.equals=function(e){return s.equals(this,e)},s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)},s.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},e.Cartographic=s,e.scaleToGeodeticSurface=r}));
