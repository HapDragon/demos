(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c91e7"],{"587e":function(e,n,t){"use strict";t.r(n);var o=t("7a23");const i={id:"test"};function a(e,n,t,a,l,s){const u=Object(o["resolveComponent"])("maingis");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createVNode"])(u)])}var l=t("475a"),s=t("a9b7"),u=(t("95bb"),t("b91b")),g=t("7199"),p=t("561f"),c=t("d350");const h="SPACEANALYSISSUNLIGHT";let r;var d={name:"test",data(){return{}},components:{maingis:s["a"]},computed:{},mounted(){let e,n=[[121.49307974622607,31.243547046415536],[121.49076172820271,31.242385751273034],[121.49083894325285,31.239733580453102],[121.4916756515493,31.238490999407098],[121.49659981037316,31.240378266758714],[121.49646231483939,31.242481354731478],[121.49609181609966,31.2445681263834]],t=u["a"].CesiumViewer.getInstance().viewer;function o(e){let t=u["a"].CesiumViewer.getInstance().GetPickedRayPositionWGS84(e.position);if(null==t)return;n.push([t.longitude,t.latitude]);let o=n.map(e=>new p["a"].CoordinateWGS84(e[0],e[1],0).ToCartesian());1!=n.length&&(2==n.length?u["a"].CesiumViewer.getInstance().SetEntity(new Cesium.Entity({id:h+"drawregion",polyline:{positions:o,material:new Cesium.Color(0,1,0,1),width:2,clampToGround:!1}})):u["a"].CesiumViewer.getInstance().SetEntity({id:h+"drawregion",polygon:{hierarchy:new Cesium.PolygonHierarchy(o),outline:!0,outlineColor:Cesium.Color.GREEN,material:Cesium.Color.YELLOW.withAlpha(.6),perPositionHeight:!0,heightReference:Cesium.HeightReference.NONE}}))}function i(a){if(g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Left_Click,o),g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Right_Click,i),u["a"].CesiumViewer.getInstance().RemoveEntities(h),n.length<3)c["a"].messagePrompt("warning","Sunlight Analysis polygon should contain at least three points");else if(null==e){const o=d.timespan.split(","),i=[Number(o[0]),Number(o[1]),Number(o[2]),Number(o[3]),Number(o[4])];e=new l["a"]({viewer:t,lonlatlist:n,pointspan:d.span,pointbottomheight:d.bottomheight,pointextrudeheight:d.extrudeheight,showpolygon:d.showpolygon,showpoints:d.showpoints,timesetting:i})}else e.UpdatePolygon(n)}function a(n){e.GetSunlightCoverate(n.position,(function(e){c["a"].notifyPrompt("SunlightCoverageRate",(100*e).toString()+"%")}))}function s(e){g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Left_Click,a),g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Right_Click,s)}r=new dat.gui.GUI,r.domElement.style="position:absolute;top:10px;left:10px;";const d={setpolygon:function(){n=[],g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Left_Click,o),g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Right_Click,i),g["a"].VM.$on(g["a"].SignalType.Scene_Mouse_Left_Click,o),g["a"].VM.$on(g["a"].SignalType.Scene_Mouse_Right_Click,i)},showpolygon:!1,showpoints:!0,extrudeheight:200,bottomheight:20,span:20,polygonheight:80,pointsize:6,timespan:"2023,12,22,6,18",getRate:function(){null!=e&&(g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Left_Click,a),g["a"].VM.$off(g["a"].SignalType.Scene_Mouse_Right_Click,s),g["a"].VM.$on(g["a"].SignalType.Scene_Mouse_Left_Click,a),g["a"].VM.$on(g["a"].SignalType.Scene_Mouse_Right_Click,s))}};r.add(d,"setpolygon"),r.add(d,"showpolygon").onChange((function(n){null!=e&&e.setpolygonvisible(n)})),r.add(d,"showpoints").onChange((function(n){null!=e&&e.setpointsvisible(n)})),r.add(d,"polygonheight",0,500,1).onChange((function(n){null!=e&&e.updatePolygonheight(n)})),r.add(d,"extrudeheight",0,500,1).onChange((function(n){null!=e&&e.UpdateExtrudeheight(n)})),r.add(d,"bottomheight",0,500,1).onChange((function(n){null!=e&&e.Updatebottomheight(n)})),r.add(d,"span",0,100,1).onChange((function(n){null!=e&&e.Updatepointspan(n)})),r.add(d,"pointsize",0,30,1).onChange((function(n){null!=e&&e.Updatepointsize(n)})),r.add(d,"timespan").onChange((function(n){if(null==e)return;const t=n.split(",");e.UpdateDateTime(t[0],t[1],t[2],t[3],t[4])})),r.add(d,"getRate").name("GetSunlightRate")},methods:{},watch:{},beforeRouteLeave(){null!=r&&r.domElement.remove()}},f=t("6b0d"),m=t.n(f);const C=m()(d,[["render",a]]);n["default"]=C}}]);
//# sourceMappingURL=chunk-2d0c91e7.ee84d930.js.map